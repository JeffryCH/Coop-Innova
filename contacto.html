<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Contacto | Coop-Innova</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/estilo.css">
</head>
<body>
  <div id="loader-bg"><div class="loader-spinner"></div></div>
  <header>
    <div id="navbar" include-html="fragmentos/navbar.html"></div>
  </header>


  <main>
    <section class="contact-section py-5" style="background: #f8f9fa;">
      <div class="container">
        <div class="row g-5 align-items-stretch">
          <!-- Formulario -->
          <div class="col-lg-7 mb-4 mb-lg-0">
            <div class="contact-form-card shadow rounded-4 p-4 bg-white h-100">
              <h3 class="mb-4 text-primary fw-bold" id="contacto-titulo">üì¨ Cont√°ctenos</h3>
              <form id="contactForm" novalidate autocomplete="off" aria-labelledby="contacto-titulo">
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="nombre" class="form-label">Nombre</label>
                    <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Tu nombre completo" required aria-required="true" aria-describedby="error-nombre" tabindex="1" />
                    <div class="invalid-feedback d-flex align-items-center gap-1" id="error-nombre" aria-live="polite"></div>
                  </div>
                  <div class="col-md-6">
                    <label for="email" class="form-label">Correo electr√≥nico</label>
                    <input type="email" class="form-control" id="email" name="email" placeholder="ejemplo@email.com" required aria-required="true" aria-describedby="error-email" tabindex="2" />
                    <div class="invalid-feedback d-flex align-items-center gap-1" id="error-email" aria-live="polite"></div>
                  </div>
                  <div class="col-md-6">
                    <label for="asunto" class="form-label">Asunto</label>
                    <input type="text" class="form-control" id="asunto" name="asunto" placeholder="Motivo del contacto" required aria-required="true" aria-describedby="error-asunto" tabindex="3" />
                    <div class="invalid-feedback d-flex align-items-center gap-1" id="error-asunto" aria-live="polite"></div>
                  </div>
                  <div class="col-md-6">
                    <label for="telefono" class="form-label">Tel√©fono</label>
                    <input type="tel" class="form-control" id="telefono" name="telefono" placeholder="Ej: 8888-8888" pattern="^[0-9+\s\-()]{8,20}$" required aria-required="true" aria-describedby="error-telefono" tabindex="4" inputmode="tel" />
                    <div class="invalid-feedback d-flex align-items-center gap-1" id="error-telefono" aria-live="polite"></div>
                  </div>
                  <div class="col-12">
                    <label for="mensaje" class="form-label">Mensaje</label>
                    <textarea class="form-control" id="mensaje" name="mensaje" rows="4" placeholder="¬øEn qu√© podemos ayudarte?" required aria-required="true" aria-describedby="error-mensaje" tabindex="5"></textarea>
                    <div class="invalid-feedback d-flex align-items-center gap-1" id="error-mensaje" aria-live="polite"></div>
                  </div>
                  <!-- Honeypot oculto -->
                  <div style="display:none;">
                    <label for="website">No llenar este campo</label>
                    <input type="text" id="website" name="website" tabindex="-1" autocomplete="off" />
                  </div>
                  <!-- Espacio para reCAPTCHA -->
                  <div class="col-12" id="recaptcha-container" aria-label="Verificaci√≥n reCAPTCHA" tabindex="6"></div>
                  <div class="col-12">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="acepto" name="acepto" required aria-required="true" aria-describedby="error-acepto" tabindex="7" />
                      <label class="form-check-label" for="acepto">Acepto la <a href="#" class="text-primary">pol√≠tica de privacidad</a></label>
                    </div>
                    <div class="invalid-feedback d-flex align-items-center gap-1" id="error-acepto" aria-live="polite"></div>
                  </div>
                  <div class="col-12">
                    <button type="submit" class="btn btn-primary w-100 py-2 fw-bold" tabindex="8" aria-label="Enviar formulario de contacto">Enviar</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <!-- Contacto y redes -->
          <div class="col-lg-5">
            <div class="d-flex flex-column gap-3 h-100 justify-content-between">
              <div class="contact-card shadow-sm rounded-4 p-3 d-flex align-items-center gap-3 bg-white">
                <span class="icon-circle bg-primary bg-opacity-10"><img src="img/phone_icon.png" alt="Tel√©fono" /></span>
                <div>
                  <div class="contact-label fw-semibold">Central Telef√≥nica</div>
                  <div class="contact-value text-primary fw-bold">+506 2222-2222</div>
                  <div class="contact-note small">Lunes a Viernes, 8:00am - 5:00pm</div>
                </div>
              </div>
              <div class="contact-card shadow-sm rounded-4 p-3 d-flex align-items-center gap-3 bg-white">
                <span class="icon-circle bg-success bg-opacity-10"><img src="img/mail_icon.png" alt="Correo" /></span>
                <div>
                  <div class="contact-label fw-semibold">Correo electr√≥nico</div>
                  <div class="contact-value text-success fw-bold">info@coopinnova.com</div>
                  <div class="contact-note small">Respuesta en horario laboral</div>
                </div>
              </div>
              <div class="contact-card shadow-sm rounded-4 p-3 d-flex align-items-center gap-3 bg-white">
                <span class="icon-circle bg-success bg-opacity-10"><img src="img/whatsapp_placeholder.png" alt="WhatsApp" /></span>
                <div>
                  <div class="contact-label fw-semibold">WhatsApp</div>
                  <div class="contact-value text-success fw-bold">+506 8888-8888</div>
                  <div class="contact-note small">Atenci√≥n: 24/7</div>
                </div>
              </div>
              <div class="contact-card shadow-sm rounded-4 p-3 d-flex align-items-center gap-3 bg-white">
                <span class="icon-circle bg-primary bg-opacity-10"><img src="img/facebook_placeholder.png" alt="Facebook" /></span>
                <div>
                  <div class="contact-label fw-semibold">Facebook</div>
                  <div class="contact-value">
                    <a href="#" class="text-primary fw-bold" style="text-decoration:none;display:inline-flex;align-items:center;gap:0.4em;">
                      <img src="img/facebook_placeholder.png" alt="Facebook" style="width:1.3em;vertical-align:middle;" /> Facebook
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-5">
          <div class="col-12">
            <div class="map-card shadow rounded-4 p-4 bg-white">
              <h5 class="fw-bold mb-3">Encu√©ntranos aqu√≠</h5>
              <div class="ratio ratio-16x9 rounded-4 overflow-hidden">
                <iframe src="https://www.google.com/maps?q=San+Jos%C3%A9,+Costa+Rica&output=embed" allowfullscreen style="border:0;"></iframe>
              </div>
              <div class="d-flex flex-wrap gap-3 justify-content-center mt-3">
                <div class="contact-card shadow-sm rounded-4 p-3 d-flex align-items-center gap-3 bg-white">
                  <span class="icon-circle bg-info bg-opacity-10"><img src="img/location_icon.png" alt="Direcci√≥n" /></span>
                  <div>
                    <div class="contact-label fw-semibold">Direcci√≥n</div>
                    <div class="contact-value">San Jos√©, Costa Rica</div>
                  </div>
                </div>
                <div class="contact-card shadow-sm rounded-4 p-3 d-flex align-items-center gap-3 bg-white">
                  <span class="icon-circle bg-warning bg-opacity-10"><img src="img/clock_icon.png" alt="Horario" /></span>
                  <div>
                    <div class="contact-label fw-semibold">Horario de atenci√≥n</div>
                    <div class="contact-value">Lunes a Viernes, 8:00am - 5:00pm</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div id="footer" include-html="fragmentos/footer.html"></div>
  </footer>

  <script>
    // Validaci√≥n en tiempo real y accesibilidad
    (function() {
      const form = document.getElementById('contactForm');
      const fields = [
        {id: 'nombre', validate: v => v.trim().length > 2, msg: 'Ingrese su nombre (m√≠nimo 3 caracteres)'},
        {id: 'email', validate: v => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v), msg: 'Ingrese un correo v√°lido'},
        {id: 'asunto', validate: v => v.trim().length > 2, msg: 'Ingrese el asunto (m√≠nimo 3 caracteres)'},
        {id: 'telefono', validate: v => /^[0-9+\s\-()]{8,20}$/.test(v), msg: 'Ingrese un tel√©fono v√°lido (solo n√∫meros y s√≠mbolos)'},
        {id: 'mensaje', validate: v => v.trim().length > 5, msg: 'Ingrese un mensaje (m√≠nimo 6 caracteres)'}
      ];
      const iconError = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#dc3545" class="bi bi-exclamation-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/><path d="M7.002 11a1 1 0 1 0 2 0 1 1 0 0 0-2 0zm.1-4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0l-.35-3.507z"/></svg>';
      const iconOk = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#198754" class="bi bi-check-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/><path d="M10.97 6.97a.75.75 0 0 0-1.08-1.04L7.477 8.417 6.384 7.323a.75.75 0 1 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.06 0l3-3z"/></svg>';

      function setFieldState(input, valid, msg) {
        const errorDiv = document.getElementById('error-' + input.id);
        if (valid) {
          input.classList.remove('is-invalid');
          input.classList.add('is-valid');
          if (errorDiv) errorDiv.innerHTML = iconOk + '<span class="ms-1">Correcto</span>';
        } else {
          input.classList.remove('is-valid');
          input.classList.add('is-invalid');
          if (errorDiv) errorDiv.innerHTML = iconError + '<span class="ms-1">' + msg + '</span>';
        }
      }

      fields.forEach(f => {
        const input = document.getElementById(f.id);
        if (input) {
          input.addEventListener('input', function() {
            setFieldState(input, f.validate(input.value), f.msg);
          });
          input.addEventListener('blur', function() {
            setFieldState(input, f.validate(input.value), f.msg);
          });
        }
      });

      // Checkbox validaci√≥n
      const acepta = document.getElementById('acepto');
      acepta.addEventListener('change', function() {
        const errorDiv = document.getElementById('error-acepto');
        if (acepta.checked) {
          acepta.classList.remove('is-invalid');
          acepta.classList.add('is-valid');
          errorDiv.innerHTML = iconOk + '<span class="ms-1">Aceptado</span>';
        } else {
          acepta.classList.remove('is-valid');
          acepta.classList.add('is-invalid');
          errorDiv.innerHTML = iconError + '<span class="ms-1">Debe aceptar la pol√≠tica</span>';
        }
      });

      // Validaci√≥n al enviar
      form.addEventListener('submit', function(e) {
        let valid = true;
        fields.forEach(f => {
          const input = document.getElementById(f.id);
          if (!f.validate(input.value)) {
            setFieldState(input, false, f.msg);
            valid = false;
          }
        });
        if (!acepta.checked) {
          acepta.classList.add('is-invalid');
          document.getElementById('error-acepto').innerHTML = iconError + '<span class="ms-1">Debe aceptar la pol√≠tica</span>';
          valid = false;
        }
        // Honeypot
        if (document.getElementById('website').value !== "") {
          valid = false;
        }
        if (!valid) {
          e.preventDefault();
          e.stopPropagation();
        }
      });
    })();
    includeHTML();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/includes.js"></script>
</body>
</html>